<style>
  #splash{
    position:fixed; inset:0; display:grid; place-items:center;
    background:#fff; z-index:99999; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,sans-serif
  }
  #splash .box{ max-width:560px; text-align:center; padding:24px }
  #splash .sub{
    font-size:.875rem; /* ~14px */
    color:#6b7280;     /* gray */
    margin-top:4px;
  }
  @keyframes fadeInOut{ 0%{opacity:.2} 50%{opacity:1} 100%{opacity:.2} }
</style>

<div id="splash">
  <div class="box">
    <div class="title">Starting MSAexplorer. Modules are loaded with pyodide. Please wait...</div>
    <div class="sub">Never gonna give you up...</div>
  </div>
</div>

<script>
(function () {
  // --- rotating subtext ---
  const subs = [
      "Never gonna give you up...",
      "Warming up matrices...",
      "Calibrating color maps...",
      "Sharpening scoring functions...",
      "Bringing the ring to Sauron...",
      "Capturing genomic essence...",
      "Counting available codons...",
      "Trying to generate alien sequences...",
      "404. Error. Motivation not found.",
      "Testing sequence quality...",
      "Perturbing fasta headers...",
      "Coloring nucleotides...",
      "Look at me. I am your new alignment viewer now.",
      "System booting up...",
      "Measuring amino acid properties...",
      "Loading fonts...",
      "Polishing nucleotides...",
      "Shuffling amino acids...",
      "Preparing BLOSSUM matrices...",
      "Planing world domination...",
      "Counting gaps (carefully)...",
      "Juggling FASTA files...",
      "Sorting exons from introns...",
      "Preparing the universe...",
      "Assessing chemical properties...",
      "Warming up matplotlib...",
      "Taking a nap...",
      "Calculating the answer to life, the universe, and everything...",
      "42, the answer to life, the universe, and everything.",
      "You are now a MSAexplorer user.",
      "You did it. You are a wizard Harry.",
      "Holding my breath...",
      "Admiring your beauty...",
      "Life is life. NaNaNaNaNa.",
      "Loading UI..."
  ];
  const subEl = document.querySelector("#splash .sub");
  let rotateId = null;
  if (subEl) {
    let i = Math.floor(Math.random() * subs.length);
    subEl.textContent = subs[i];
    rotateId = setInterval(() => {
      i = (i + 1) % subs.length;
      subEl.textContent = subs[i];
    }, 5000);
  }

  // fadeOut
  function fadeOut() {
    const el = document.getElementById("splash");
    if (!el) return;
    el.style.opacity = "0";
    setTimeout(() => el.remove(), 400); // after CSS transition
  }

  // Watch for iframe.app-frame and its src attribute
  const observer = new MutationObserver(() => {
    const iframe = document.querySelector("iframe.app-frame[src]");
    if (iframe && iframe.getAttribute("src")) {
      fadeOut();
      observer.disconnect();
    }
  });

  observer.observe(document.body, {
    childList: true,
    subtree: true,
    attributes: true,
    attributeFilter: ["src"]
  });
})();
</script>